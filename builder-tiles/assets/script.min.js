var Builder_Tiles;var flip_inervals=[];function matchQuery(d,c){return parseQuery(d).some(function(b){var h=b.inverse,g="all"===b.type||c.type===b.type;if(g&&h||!g&&!h){return !1}var f=b.expressions.every(function(i){var m=i.feature,l=i.modifier,k=i.value,j=c[m];if(!j){return !1}switch(m){case"orientation":case"scan":return j.toLowerCase()===k.toLowerCase();case"width":case"height":case"device-width":case"device-height":k=toPx(k),j=toPx(j);break;case"resolution":k=toDpi(k),j=toDpi(j);break;case"aspect-ratio":case"device-aspect-ratio":case"device-pixel-ratio":k=toDecimal(k),j=toDecimal(j);break;case"grid":case"color":case"color-index":case"monochrome":k=parseInt(k,10)||1,j=parseInt(j,10)||0}switch(l){case"min":return j>=k;case"max":return k>=j;default:return j===k}});return f&&!h||!f&&h})}function parseQuery(b){return b.split(",").map(function(h){h=h.trim();var g=h.match(RE_MEDIA_QUERY);if(!g){throw new SyntaxError('Invalid CSS media query: "'+h+'"')}var l=g[1],k=g[2],j=((g[3]||"")+(g[4]||"")).trim(),i={};if(i.inverse=!!l&&"not"===l.toLowerCase(),i.type=k?k.toLowerCase():"all",!j){return i.expressions=[],i}if(j=j.match(/\([^\)]+\)/g),!j){throw new SyntaxError('Invalid CSS media query: "'+h+'"')}return i.expressions=j.map(function(a){var f=a.match(RE_MQ_EXPRESSION);if(!f){throw new SyntaxError('Invalid CSS media query: "'+h+'"')}var e=f[1].toLowerCase().match(RE_MQ_FEATURE);return{modifier:e[1],feature:e[2],value:f[2]}}),i})}function toDecimal(e){var f,d=Number(e);return d||(f=e.match(/^(\d+)\s*\/\s*(\d+)$/),d=f[1]/f[2]),d}function toDpi(e){var d=parseFloat(e),f=String(e).match(RE_RESOLUTION_UNIT)[1];switch(f){case"dpcm":return d/2.54;case"dppx":return 96*d;default:return d}}function toPx(e){var d=parseFloat(e),f=String(e).match(RE_LENGTH_UNIT)[1];switch(f){case"em":return 16*d;case"rem":return 16*d;case"cm":return 96*d/2.54;case"mm":return 96*d/2.54/10;case"in":return 96*d;case"pt":return 72*d;case"pc":return 72*d/12;default:return d}}var RE_MEDIA_QUERY=/^(?:(only|not)?\s*([_a-z][_a-z0-9-]*)|(\([^\)]+\)))(?:\s*and\s*(.*))?$/i,RE_MQ_EXPRESSION=/^\(\s*([_a-z-][_a-z0-9-]*)\s*(?:\:\s*([^\)]+))?\s*\)$/,RE_MQ_FEATURE=/^(?:(min|max)-)?(.+)/,RE_LENGTH_UNIT=/(em|rem|px|cm|mm|in|pt|pc)?\s*$/,RE_RESOLUTION_UNIT=/(dpi|dpcm|dppx)?\s*$/;(function(a){var c={intervals:[],highlight:function(d){d.addClass("current")},unhighlight:function(d){a("li",d).removeClass("current")},timer:function(i,f,h,g){var e=0,d=0;this.resetTimer(i,f);this.intervals[f]=setInterval(function(){e+=g;d=(e*100)/h;i.css("width",d+"%")},g)},resetTimer:function(e,d){if(null!==this.intervals[d]){clearInterval(this.intervals[d])}e.width("width","0%")},getCenter:function(d){var f=d.triggerHandler("currentVisible"),e=typeof f!=="undefined"?f.length:1;return Math.floor(e/2)},getDirection:function(f,e){var h=f.triggerHandler("currentVisible"),d=Math.floor(h.length/2),g=e.index();if(g>=d){return"next"}return"prev"},adjustCarousel:function(d){if(d.closest(".twg-wrap").length>0){var g=d.triggerHandler("currentVisible"),f=typeof g!=="undefined"?g.length:1,e=a("li:first-child",d).width();d.triggerHandler("configuration",{width:""+e*f,responsive:false});d.parent().css("width",(e*g)+"px")}}};function b(d){d.each(function(){var g=a(this),e="off"!=g.data("autoplay")?parseInt(g.data("autoplay"),10):0,f={responsive:true,circular:!!("yes"==g.data("wrap")),infinite:true,height:"auto",swipe:true,scroll:{items:g.data("scroll")?parseInt(g.data("scroll"),10):1,fx:g.data("effect"),duration:parseInt(g.data("speed")),onBefore:function(h){var i=g.closest(".twg-wrap"),j=a(".timer-bar",i);if(j.length>0){c.timer(j,g.data("id"),e,20);c.unhighlight(g)}},onAfter:function(h){var k=h.items.visible;var j=g.closest(".twg-wrap");if(j.length>0){var i=k.filter(":eq("+c.getCenter(g)+")");a(".twg-link",i).trigger("click");c.highlight(i)}}},auto:{play:!!("off"!=g.data("autoplay")),timeoutDuration:e},items:{visible:{min:1,max:g.data("visible")?parseInt(g.data("visible"),10):1},width:g.data("width")?parseInt(g.data("width"),10):222},prev:{button:"yes"==g.data("slidernav")?"#"+g.data("id")+" .carousel-prev":null},next:{button:"yes"==g.data("slidernav")?"#"+g.data("id")+" .carousel-next":null},pagination:{container:"yes"==g.data("pager")?"#"+g.data("id")+" .carousel-pager":null,anchorBuilder:function(){if(g.closest(".testimonial.slider").length>0){var i=a(".testimonial-post",this).data("thumb"),j=a(".testimonial-post",this).data("thumbw"),h=a(".testimonial-post",this).data("thumbh");return'<span><a href="#"><img src="'+i+'" width="'+j+'" height="'+h+'" /></a></span>'}if((g.closest(".portfolio-multiple.slider").length>0)||(g.closest(".team-multiple.slider").length>0)){return'<a href="#"></a>'}return false}},onCreate:function(){var j=g.closest(".slideshow-wrap"),m=g.closest(".team-multiple.slider"),n=g.closest(".portfolio-multiple.slider"),i=g.closest(".testimonial.slider"),l=g.closest(".twg-wrap");g.closest(".slider").prevAll(".slideshow-slider-loader").first().remove();j.css({visibility:"visible",height:"auto"}).addClass("carousel-ready");if(i.length>0){i.css({visibility:"visible",height:"auto"});a(".carousel-pager",j).addClass("testimonial-pager")}if(m.length>0){m.css({visibility:"visible",height:"auto"});a(".carousel-prev, .carousel-next",m).text("")}if(n.length>0){n.css({visibility:"visible",height:"auto"});a(".carousel-prev, .carousel-next",n).text("")}if("no"==g.data("slidernav")){a(".carousel-prev",j).remove();a(".carousel-next",j).remove()}if(l.length>0){var h=c.getCenter(g),k=a("li",g).filter(":eq("+h+")");c.highlight(k);g.trigger("slideTo",[-h,{duration:0}]);a(".carousel-pager",l).remove();a(".carousel-prev",l).addClass("gallery-slider-prev").text("");a(".carousel-next",l).addClass("gallery-slider-next").text("")}a(window).resize();c.adjustCarousel(g)}};if(g.children().length<2){f.onCreate();return true}g.carouFredSel(f).find("li").on(themifyScript.galleryEvent,function(){if(g.closest(".twg-wrap").length>0){var h=a(this);a("li",g).removeClass("current");h.addClass("current");h.trigger("slideTo",[h,-c.getCenter(g),false,{items:1,duration:300,onBefore:function(i){var j=g.closest(".twg-wrap"),k=a(".timer-bar",j);if(k.length>0){c.timer(k,g.data("id"),e,20);c.unhighlight(g)}},onAfter:function(i){}},null,c.getDirection(g,h)])}});a(window).on("debouncedresize",c.adjustCarousel(g))})}Builder_Tiles={init:function(){a(document).ready(Builder_Tiles.do_lightbox);a(window).on("load",Builder_Tiles.do_tiles);a("body").on("builder_load_module_partial builder_toggle_frontend",Builder_Tiles.do_tiles).on("mouseenter",".module-tile.has-flip",function(){Builder_Tiles.flip_tile(a(this),"back");window.clearInterval(flip_inervals[a(this).attr("id")])}).on("mouseleave",".module-tile.has-flip",function(){Builder_Tiles.flip_tile(a(this),"front")}).on("click",".module-tile .tile-flip-back-button",function(){Builder_Tiles.flip_tile(a(this).closest(".module-tile"));return false})},do_lightbox:function(){if(a(".module-tile .themify_lightbox").length>0){Themify.InitGallery()}},add_tiles_loader:function(){a('.tb-column:has(".module-tile")').append('<div class="tile-loader"></div>')},do_masonry:function(d){var h=a('<div class="module-tile size-square-small" style="visibility: hidden !important; opacity: 0;" />').appendTo(d),e=h.width();d.find(".module-tile").css({visibility:"visible",width:"",height:""});if(BuilderTiles.fluid_tiles=="yes"){var g=null;var f=d.width("100%").width();a(BuilderTiles.fluid_tile_rules).each(function(k,j){if(matchQuery(j.query,{type:"screen",width:f})){g=j.size}});if(g!=null){d.width(f);e=Math.floor(f/parseInt(g));d.find(".module-tile.size-square-small, .module-tile.size-square-small .tile-background img, .module-tile.size-square-small .map-container").css({width:e+"px",height:e+"px"});d.find(".module-tile.size-square-large, .module-tile.size-square-large .tile-background img, .module-tile.size-square-large .map-container").css({width:e*2+"px",height:e*2+"px"});d.find(".module-tile.size-landscape, .module-tile.size-landscape .tile-background img, .module-tile.size-landscape .map-container").css({width:e*2+"px",height:e+"px"});d.find(".module-tile.size-portrait, .module-tile.size-portrait .tile-background img, .module-tile.size-portrait .map-container").css({width:e+"px",height:e*2+"px"})}d.find(".map-container").each(function(){if(typeof a(this).data("gmap_object")=="object"){google.maps.event.trigger(a(this).data("gmap_object"),"resize")}})}h.css("display","none");d.masonry({itemSelector:".module-tile",columnWidth:e,isResizeBound:false,gutter:0,isOriginLeft:BuilderTiles.isOriginLeft=="1"?true:false});h.remove()},do_tiles:function(){function d(){a(BuilderTiles.tiles_selector).each(function(){var e=a(this),f=[jQuery()],g=0;e.find("> .module").each(function(){if(a(this).hasClass("module-tile")){f[g]=f[g].add(this)}else{g++;f[g]=jQuery()}});a.each(f,function(j,h){if(h.length>0){h.wrapAll('<div class="tiles-wrap" />')}});e.find(".tiles-wrap").each(function(){var h=a(this);Builder_Tiles.do_masonry(h);a(window).on("debouncedresize",function(){Builder_Tiles.do_masonry(h)})});e.find(".tile-loader").remove()});a(".module.module-tile.has-flip").each(function(){if(a(this).data("auto-flip")>0){var f=a(this),e=f.data("auto-flip")*1000;flip_inervals[f.attr("id")]=window.setInterval(function(){Builder_Tiles.flip_tile(f)},e)}});if("undefined"!==typeof a.fn.ThemifyWideGallery){a(".module-tile .twg-wrap").ThemifyWideGallery({speed:parseInt(BuilderTiles.galleryFadeSpeed,10),event:BuilderTiles.galleryEvent,ajax_url:BuilderTiles.ajax_url,ajax_nonce:BuilderTiles.ajax_nonce,networkError:BuilderTiles.networkError,termSeparator:BuilderTiles.termSeparator})}Themify.LoadAsync(themify_vars.url+"/js/carousel.js",function(){b(a(".module-tile .slideshow"))},null,null,function(){return("undefined"!==typeof a.fn.carouFredSel)})}Themify.LoadAsync(BuilderTiles.url+"jquery.smartresize.js",function(){Themify.LoadAsync(BuilderTiles.include_url+"masonry.min.js",function(){Themify.LoadAsync(BuilderTiles.url+"themify.widegallery.js",d,BuilderTiles.ver,null,function(){return("undefined"!==typeof a.fn.ThemifyWideGallery)})},BuilderTiles.ver,null,function(){return("undefined"!==typeof a.fn.masonry)})},BuilderTiles.ver,null,function(){return("undefined"!==typeof a.event.special.debouncedresize)})},flip_tile:function(e,d){d=d||(e.hasClass("builder-tile-flip")?"front":"back");if(d=="front"){e.removeClass("builder-tile-flip").find(".tile-back").attr("style","").removeClass(e.data("in-effect")).addClass("wow animated "+e.data("out-effect"));window.setTimeout(function(){e.removeClass("builder-tile-flipped")},BuilderTiles.transition_duration)}else{e.addClass("builder-tile-flip").find(".tile-back").attr("style","").removeClass(e.data("out-effect")).addClass("wow animated "+e.data("in-effect"));window.setTimeout(function(){e.addClass("builder-tile-flipped")},BuilderTiles.transition_duration)}}};Builder_Tiles.init()}(jQuery));